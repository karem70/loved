<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>عشانك ♥</title>
  <meta name="description" content="رسالة حب وتشجيع مع أنيميشن كتابة وموسيقى هادئة." />
  <style>
    :root {
      --bg1: #1b0f2e;
      --bg2: #2a1749;
      --accent: #ff6b9a;
      --accent-2: #ffd3e1;
      --text: #fff7fb;
      --muted: #e9d9ff;
      --card: rgba(255,255,255,0.1);
      --glass: rgba(255, 255, 255, 0.12);
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 28px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Cairo, Tahoma, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 700px at 80% -10%, #3a1f6a 0%, transparent 60%),
                  radial-gradient(900px 600px at -10% 110%, #52206f 0%, transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      overflow-x: hidden;
    }

    /* Floating hearts background */
    .hearts {
      position: fixed; inset: 0; overflow: hidden; pointer-events: none; z-index: 0;
      filter: drop-shadow(0 8px 12px rgba(0,0,0,.25));
    }
    .heart {
      position: absolute; width: 18px; height: 18px; opacity: .75;
      background:
        radial-gradient(circle at 30% 30%, var(--accent) 0 35%, transparent 36%),
        radial-gradient(circle at 70% 30%, var(--accent) 0 35%, transparent 36%),
        conic-gradient(from 0deg at 50% 65%, var(--accent) 0 60%, transparent 61%);
      transform: rotate(45deg) scale(1);
      border-radius: 4px;
      animation: floatUp linear infinite;
    }
    @keyframes floatUp {
      0%   { transform: translateY(0) rotate(45deg) scale(0.9); opacity: .0; }
      10%  { opacity: .85; }
      100% { transform: translateY(-120vh) rotate(45deg) scale(1.1); opacity: 0; }
    }

    .container {
      position: relative; z-index: 1; min-height: 100dvh;
      display: grid; place-items: center; padding: 28px;
    }

    .card {
      width: min(900px, 95vw); backdrop-filter: blur(8px);
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.08));
      border: 1px solid rgba(255,255,255,0.18);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(18px, 3vw, 28px);
    }

    .title {
      display: flex; align-items: center; gap: 10px; margin: 4px 0 16px;
      font-weight: 800; letter-spacing: .5px; color: var(--accent-2);
      font-size: clamp(26px, 4vw, 40px);
    }
    .title .dot { width: 10px; height: 10px; background: var(--accent); border-radius: 999px; box-shadow: 0 0 20px var(--accent); }

    .message {
      font-size: clamp(18px, 2.35vw, 22px);
      line-height: 1.9; color: var(--muted);
      min-height: 8lh; /* reserve space during typing */
      white-space: pre-wrap;
    }

    .actions { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 18px; }
    button {
      cursor: pointer; border: 0; padding: 12px 16px; border-radius: 14px;
      background: linear-gradient(180deg, #ff91b5, #ff6b9a);
      color: #1a0b1b; font-weight: 700; box-shadow: 0 8px 24px rgba(255, 107, 154, .35);
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
    }
    button:hover { transform: translateY(-1px); filter: brightness(1.06); box-shadow: 0 10px 26px rgba(255, 107, 154, .45); }
    .ghost {
      background: rgba(255,255,255,.08); color: var(--accent-2);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.18);
    }

    .footer { margin-top: 16px; opacity: .8; font-size: 14px; color: var(--accent-2); }
    .blink { animation: blink 1s steps(2, start) infinite; }
    @keyframes blink { to { visibility: hidden; } }

    /* Tap to start overlay (for audio permissions) */
    .start-overlay {
      position: fixed; inset: 0; display: grid; place-items: center; z-index: 2;
      background: radial-gradient(800px 500px at 50% 20%, rgba(255,255,255,0.08), rgba(0,0,0,0.6)),
                  linear-gradient(135deg, rgba(27,15,46,.95), rgba(42,23,73,.95));
      backdrop-filter: blur(2px);
      transition: opacity .4s ease; opacity: 1; visibility: visible;
    }
    .start-overlay.hidden { opacity: 0; visibility: hidden; }
    .start-card {
      width: min(520px, 90vw); text-align: center; padding: 24px; border-radius: 22px;
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.08));
      border: 1px solid rgba(255,255,255,0.18); box-shadow: var(--shadow);
    }
    .start-card h1 { margin: 0 0 8px; font-size: clamp(24px, 5vw, 34px); color: var(--accent-2); }
    .start-card p { margin: 0 0 16px; color: var(--muted); line-height: 1.8; }

    /* Mobile safe area */
    @supports (padding: max(0px)) {
      .container { padding: max(28px, env(safe-area-inset-top)) max(28px, env(safe-area-inset-right)) max(28px, env(safe-area-inset-bottom)) max(28px, env(safe-area-inset-left)); }
    }
  </style>
</head>
<body>
  <!-- Floating hearts -->
  <div class="hearts" aria-hidden="true" id="hearts"></div>

  <div class="container">
    <main class="card" role="main" aria-live="polite">
      <div class="title"><span class="dot"></span> لِعُيونِك ♥</div>
      <div class="message" id="message"></div>
      <div class="actions">
        <button id="replay">أعد قراءة الرسالة</button>
        <button id="toggle-audio" class="ghost">تشغيل الموسيقى</button>
      </div>
      <div class="footer">ملاحظة: لو الموسيقى ما اشتغلتش تلقائيًا، اضغطي على «تشغيل الموسيقى». </div>
    </main>
  </div>

  <!-- Tap-to-start overlay (required by most browsers for audio autoplay) -->
  <div class="start-overlay" id="startOverlay">
    <div class="start-card">
      <h1>قبل ما نبدأ 💗</h1>
      <p>اضغطي على الزر ده✨ عشان تبدئى .</p>
      <button id="startBtn">ابدئي السِّحر ✨</button>
    </div>
  </div>

  <!-- Audio: ضع ملف باسم music.mp3 بجوار هذا الملف -->
  <audio id="bgm" src="music.mp3" preload="auto" loop></audio>

  <script>
    // ====== رسالة النص ======
    const fullText = (
`يمكن أنا قربت من أهم نجاح في حياتي… بس الحقيقة إن النجاح الحقيقي أنا عشته من يوم ما لقيتك جنبي.
ثقتك فيا مش مجرد كلام، دي القوة اللي بتخليني أكمل، والإيمان اللي بيخليني أتحدى أي حاجة.

ربنا يخليكي ليا، وأنا متأكد إن كل حاجة هتتحل وهتبقى ليا في الآخر… أنا هحارب الدنيا كلها علشانك ❤️
 ❤️ واسمعى للاخر`

    );

    const msgEl = document.getElementById('message');
    const replayBtn = document.getElementById('replay');
    const toggleAudioBtn = document.getElementById('toggle-audio');
    const audio = document.getElementById('bgm');
    const startOverlay = document.getElementById('startOverlay');
    const startBtn = document.getElementById('startBtn');

    // ====== Typewriter effect ======
    let typingIndex = 0, typingTimer;
    const typeSpeed = 28; // ms per character

    function startTyping() {
      clearInterval(typingTimer);
      typingIndex = 0;
      msgEl.textContent = '';
      typingTimer = setInterval(() => {
        if (typingIndex < fullText.length) {
          msgEl.textContent += fullText.charAt(typingIndex++);
          window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        } else {
          clearInterval(typingTimer);
        }
      }, typeSpeed);
    }

    replayBtn.addEventListener('click', () => {
      startTyping();
    });

    // ====== Audio controls ======
    let audioEnabled = false;
    async function enableAudio() {
      try {
        await audio.play();
        audioEnabled = true;
        toggleAudioBtn.textContent = 'إيقاف الموسيقى';
      } catch (e) {
        audioEnabled = false;
        toggleAudioBtn.textContent = 'تشغيل الموسيقى';
      }
    }

    toggleAudioBtn.addEventListener('click', async () => {
      if (!audioEnabled) {
        await enableAudio();
      } else {
        audio.pause();
        audioEnabled = false;
        toggleAudioBtn.textContent = 'تشغيل الموسيقى';
      }
    });

    // ====== Start overlay logic ======
    startBtn.addEventListener('click', async () => {
      startOverlay.classList.add('hidden');
      startTyping();
      await enableAudio();
    }, { once: true });

    // ====== Hearts generator ======
    const heartsContainer = document.getElementById('hearts');
    function spawnHeart() {
      const h = document.createElement('div');
      h.className = 'heart';
      const size = 12 + Math.random() * 20;
      h.style.width = h.style.height = size + 'px';
      h.style.left = Math.random() * 100 + 'vw';
      const duration = 6 + Math.random() * 8; // seconds
      h.style.animationDuration = duration + 's';
      h.style.opacity = 0.6 + Math.random() * 0.4;
      heartsContainer.appendChild(h);
      setTimeout(() => h.remove(), duration * 1000);
    }
    setInterval(spawnHeart, 220);

    // Accessibility: allow space/enter to trigger start
    window.addEventListener('keydown', (e) => {
      if (!startOverlay.classList.contains('hidden') && (e.key === 'Enter' || e.key === ' ')) {
        startBtn.click();
      }
    });
  </script>
</body>
</html>
